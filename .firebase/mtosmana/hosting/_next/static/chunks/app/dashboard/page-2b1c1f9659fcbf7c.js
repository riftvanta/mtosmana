(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{283:(e,s,a)=>{"use strict";a.d(s,{A:()=>i,AuthProvider:()=>o,N:()=>c});var r=a(5155),t=a(2115),n=a(9323);let l=(0,t.createContext)(void 0),i=()=>{let e=(0,t.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",s=i();return(0,t.useEffect)(()=>{s.loading||s.user||(window.location.href=e)},[s.loading,s.user,e]),s},o=e=>{let{children:s}=e,[a,i]=(0,t.useState)(null),[c,o]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=async()=>{try{await (0,n.r1)()}catch(e){console.error("Error initializing app:",e)}},s=async()=>{try{let e=localStorage.getItem("auth_user");if(e){let s=JSON.parse(e);s.id&&s.username&&s.role?i(s):localStorage.removeItem("auth_user")}}catch(e){console.error("Error checking auth:",e),localStorage.removeItem("auth_user")}finally{o(!1)}};(async()=>{await e(),await s()})()},[]);let d=async e=>{try{o(!0);let s=await (0,n.$u)(e);if(s)return i(s),localStorage.setItem("auth_user",JSON.stringify(s)),!0;return!1}catch(e){return console.error("Login error:",e),localStorage.removeItem("auth_user"),i(null),!1}finally{o(!1)}},m=async()=>{try{i(null),localStorage.removeItem("auth_user")}catch(e){console.error("Logout error:",e)}};return(0,r.jsx)(l.Provider,{value:{user:a,loading:c,login:d,logout:m},children:s})}},3736:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var r=a(5155),t=a(2115),n=a(283);function l(e){let{children:s,title:a}=e,{user:l,logout:i}=(0,n.A)(),[c,o]=(0,t.useState)(!1),d=async()=>{await i(),window.location.href="/login"},m=l?"admin"===l.role?[{name:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Orders",href:"/orders",icon:"\uD83D\uDCCB"},{name:"Exchanges",href:"/exchanges",icon:"\uD83C\uDFEA"},{name:"Banks",href:"/banks",icon:"\uD83C\uDFE6"},{name:"Reports",href:"/reports",icon:"\uD83D\uDCC8"}]:[{name:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Orders",href:"/orders",icon:"\uD83D\uDCCB"},{name:"New Order",href:"/orders/new",icon:"➕"},{name:"History",href:"/history",icon:"\uD83D\uDCDC"}]:[];return(0,r.jsxs)("div",{className:"h-screen flex bg-gray-100",children:[c&&(0,r.jsx)("div",{className:"fixed inset-0 flex z-40 md:hidden",onClick:()=>o(!1),children:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),(0,r.jsxs)("div",{className:"\n        fixed inset-y-0 left-0 flex flex-col w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out z-50\n        ".concat(c?"translate-x-0":"-translate-x-full","\n        md:translate-x-0 md:static md:inset-auto md:transform-none\n      "),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Transfer System"}),(0,r.jsxs)("button",{onClick:()=>o(!1),className:"md:hidden p-1 rounded-md hover:bg-gray-100",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close sidebar"}),"✕"]})]}),(0,r.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-blue-600 text-sm font-medium",children:null==l?void 0:l.username.charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==l?void 0:l.username}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 capitalize",children:[null==l?void 0:l.role,(null==l?void 0:l.exchangeName)&&" - ".concat(l.exchangeName)]})]})]})}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-1",children:m.map(e=>(0,r.jsxs)("a",{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[(0,r.jsx)("span",{className:"mr-3 text-lg",children:e.icon}),e.name]},e.name))}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)("button",{onClick:d,className:"w-full flex items-center px-2 py-2 text-sm font-medium rounded-md text-red-600 hover:bg-red-50",children:[(0,r.jsx)("span",{className:"mr-3 text-lg",children:"\uD83D\uDEAA"}),"Logout"]})})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("button",{onClick:()=>o(!0),className:"md:hidden p-1 rounded-md hover:bg-gray-100",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open sidebar"}),"☰"]}),(0,r.jsx)("h2",{className:"ml-2 md:ml-0 text-xl font-semibold text-gray-900",children:a})]}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-blue-600 text-sm font-medium",children:null==l?void 0:l.username.charAt(0).toUpperCase()})})})})]})}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-50",children:(0,r.jsx)("div",{className:"p-4 md:p-6",children:s})})]})]})}var i=a(9323);function c(e){let{onUserCreated:s,onClose:a}=e,[n,l]=(0,t.useState)(!1),[c,o]=(0,t.useState)(!1),[d,m]=(0,t.useState)({username:"",password:"",exchangeName:"",balance:0,commissionIncoming:0,commissionOutgoing:0}),[x,u]=(0,t.useState)(""),[h,g]=(0,t.useState)(""),b=e=>{let{name:s,value:a,type:r}=e.target;m(e=>({...e,[s]:"number"===r?parseFloat(a)||0:a})),u(""),g("")},f=()=>{l(!1),null==a||a()},N=async e=>{e.preventDefault(),o(!0),u(""),g("");try{let e={username:d.username,password:d.password,exchangeName:d.exchangeName,balance:d.balance,commissionRates:{incoming:d.commissionIncoming,outgoing:d.commissionOutgoing}};await (0,i.dT)(e)?(g('Exchange user "'.concat(d.username,'" created successfully!')),m({username:"",password:"",exchangeName:"",balance:0,commissionIncoming:0,commissionOutgoing:0}),null==s||s(),setTimeout(()=>{f(),g("")},3e3)):u("Failed to create exchange user. Username might already exist.")}catch(e){u("An error occurred while creating the exchange user."),console.error("Error creating exchange user:",e)}finally{o(!1)}},p=void 0!==a;return p||n?p||n?(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Create New Exchange User"}),(0,r.jsx)("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username *"}),(0,r.jsx)("input",{type:"text",name:"username",id:"username",required:!0,value:d.username,onChange:b,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., exchange2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password *"}),(0,r.jsx)("input",{type:"password",name:"password",id:"password",required:!0,value:d.password,onChange:b,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Secure password"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"exchangeName",className:"block text-sm font-medium text-gray-700",children:"Exchange Name *"}),(0,r.jsx)("input",{type:"text",name:"exchangeName",id:"exchangeName",required:!0,value:d.exchangeName,onChange:b,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., Jordan Money Exchange"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700",children:"Initial Balance (JOD)"}),(0,r.jsx)("input",{type:"number",name:"balance",id:"balance",step:"0.01",value:d.balance,onChange:b,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"0.00"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"commissionIncoming",className:"block text-sm font-medium text-gray-700",children:"Incoming Commission (JOD)"}),(0,r.jsx)("input",{type:"number",name:"commissionIncoming",id:"commissionIncoming",step:"0.01",value:d.commissionIncoming,onChange:b,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"2.50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"commissionOutgoing",className:"block text-sm font-medium text-gray-700",children:"Outgoing Commission (JOD)"}),(0,r.jsx)("input",{type:"number",name:"commissionOutgoing",id:"commissionOutgoing",step:"0.01",value:d.commissionOutgoing,onChange:b,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"1.50"})]})]}),x&&(0,r.jsx)("div",{className:"rounded-md bg-red-50 p-3",children:(0,r.jsx)("div",{className:"text-sm text-red-800",children:x})}),h&&(0,r.jsx)("div",{className:"rounded-md bg-green-50 p-3",children:(0,r.jsx)("div",{className:"text-sm text-green-800",children:h})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:f,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating...":"Create User"})]})]})]})})}):null:(0,r.jsxs)("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)("span",{className:"mr-2",children:"➕"}),"Create Exchange User"]})}function o(){let[e,s]=(0,t.useState)(!1);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to Admin Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage exchange offices, monitor orders, and oversee financial transfers."})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{name:"Total Orders",value:"0",icon:"\uD83D\uDCCB",color:"bg-blue-500"},{name:"Pending Orders",value:"0",icon:"⏳",color:"bg-yellow-500"},{name:"Active Exchanges",value:"1",icon:"\uD83C\uDFEA",color:"bg-green-500"},{name:"Total Balance",value:"JOD 1,000",icon:"\uD83D\uDCB0",color:"bg-purple-500"}].map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 rounded-full ".concat(e.color," text-white text-lg"),children:e.icon}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-600",children:e.name}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.value})]})]})},e.name))}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("button",{onClick:()=>s(!0),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFEA"}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Create Exchange"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Add new exchange office"})]})}),(0,r.jsx)("button",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-400 hover:bg-green-50 transition-colors",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFE6"}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Manage Banks"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Configure platform banks"})]})}),(0,r.jsx)("button",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 transition-colors",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCCA"}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"View Reports"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Financial reports"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDD"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No recent activity"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Activity will appear here once exchanges start submitting orders."})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-3"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"System Online"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-3"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Database Connected"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-3"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Firebase Storage Ready"})]})]})]}),e&&(0,r.jsx)(c,{onUserCreated:()=>{s(!1),window.location.reload()},onClose:()=>s(!1)})]})}var d=a(6104),m=a(5317);function x(){var e,s,a,l,i;let{user:c}=(0,n.A)(),[o,x]=(0,t.useState)(null),[u,h]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{if(!(null==c?void 0:c.id))return h(!1);try{let a=(0,m.rJ)(d.db,"users"),r=(0,m.P)(a,(0,m._M)("username","==",c.username)),t=await (0,m.GG)(r);if(!t.empty){var e,s;let a=t.docs[0],r=a.data();x({id:a.id,username:r.username,password:r.password,role:r.role,exchangeName:r.exchangeName,contactInfo:r.contactInfo,balance:r.balance||0,commissionRates:r.commissionRates||{incoming:0,outgoing:0},assignedBanks:r.assignedBanks||[],status:r.status||"active",createdAt:(null==(e=r.createdAt)?void 0:e.toDate())||new Date,updatedAt:(null==(s=r.updatedAt)?void 0:s.toDate())||new Date})}}catch(e){console.error("Error fetching user data:",e)}finally{h(!1)}})()},[c]);let g=[{name:"My Orders",value:"0",icon:"\uD83D\uDCCB",color:"bg-blue-500"},{name:"Pending",value:"0",icon:"⏳",color:"bg-yellow-500"},{name:"Completed",value:"0",icon:"✅",color:"bg-green-500"},{name:"Current Balance",value:o?"JOD ".concat(o.balance.toLocaleString()):"JOD 0",icon:"\uD83D\uDCB0",color:"bg-purple-500"}];return u?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome, ",(null==o?void 0:o.exchangeName)||(null==c?void 0:c.exchangeName)||(null==c?void 0:c.username),"!"]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Submit and manage your financial transfer orders from this dashboard."}),(null==o||null==(e=o.contactInfo)?void 0:e.email)&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["\uD83D\uDCE7 ",o.contactInfo.email," • \uD83D\uDCF1 ",null==(s=o.contactInfo)?void 0:s.phone]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-3 rounded-full ".concat(e.color," text-white text-xl"),children:e.icon}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.name}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]})]})},e.name))}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)("button",{className:"p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:"\uD83D\uDCE4"}),(0,r.jsx)("div",{className:"text-lg font-medium text-gray-700 mb-1",children:"Outgoing Transfer"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Send money via CliQ"})]})}),(0,r.jsx)("button",{className:"p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-400 hover:bg-green-50 transition-colors",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:"\uD83D\uDCE5"}),(0,r.jsx)("div",{className:"text-lg font-medium text-gray-700 mb-1",children:"Incoming Transfer"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Receive money to bank account"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Exchange Name"}),(0,r.jsx)("p",{className:"text-lg text-gray-900",children:(null==o?void 0:o.exchangeName)||(null==c?void 0:c.exchangeName)||"Not set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Username"}),(0,r.jsx)("p",{className:"text-lg text-gray-900",children:null==c?void 0:c.username})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Commission Rates"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Incoming: ",(null==o||null==(a=o.commissionRates)?void 0:a.incoming)?"JOD ".concat(o.commissionRates.incoming):"Not configured"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Outgoing: ",(null==o||null==(l=o.commissionRates)?void 0:l.outgoing)?"JOD ".concat(o.commissionRates.outgoing):"Not configured"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Assigned Banks"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(null==o||null==(i=o.assignedBanks)?void 0:i.length)?"".concat(o.assignedBanks.length," banks assigned"):"No banks assigned yet"})]}),(null==o?void 0:o.contactInfo)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Contact Email"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:o.contactInfo.email||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Phone Number"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:o.contactInfo.phone||"Not provided"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Orders"}),(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Start by creating your first transfer order."}),(0,r.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Create New Order"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Connection Status"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-3"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Connected to System"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-3"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Real-time Updates Active"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 ".concat(o?"bg-green-400":"bg-yellow-400"," rounded-full mr-3")}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:o?"Firebase Data Loaded":"Using Demo Data"})]})]})]})]})}function u(){let{user:e,loading:s}=(0,n.N)();return s?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e?(0,r.jsx)(l,{title:"admin"===e.role?"Admin Dashboard":e.exchangeName?"".concat(e.exchangeName," Dashboard"):"Exchange Dashboard",children:"admin"===e.role?(0,r.jsx)(o,{}):(0,r.jsx)(x,{})}):null}},6104:(e,s,a)=>{"use strict";a.d(s,{db:()=>c});var r=a(3915),t=a(5317),n=a(858),l=a(6864);let i=(0,r.Wp)({apiKey:"AIzaSyDT2ucPBS2vS_YwxEoZd-bDAhXqj9Dz_j8",authDomain:"mtosmana.firebaseapp.com",projectId:"mtosmana",storageBucket:"mtosmana.firebasestorage.app",messagingSenderId:"77387574915",appId:"1:77387574915:web:7b6855e73ec15269d935b6",measurementId:"G-110ZTYS339"}),c=(0,t.aU)(i);(0,n.c7)(i);(0,l.TT)().then(e=>{e&&(0,l.P5)(i)})},8030:(e,s,a)=>{Promise.resolve().then(a.bind(a,3736))},9323:(e,s,a)=>{"use strict";a.d(s,{$u:()=>h,dT:()=>g,r1:()=>u});var r=a(9980),t=a(6104),n=a(5317);let l=async e=>await r.Ay.hash(e,12),i=async(e,s)=>await r.Ay.compare(e,s),c=e=>/^[a-zA-Z0-9_-]{3,50}$/.test(e),o=e=>e.length>=6,d=async()=>{try{let e=(0,n.rJ)(t.db,"test");return await (0,n.GG)(e),!0}catch(e){return console.warn("Firebase not accessible:",e),!1}},m=async e=>{let{username:s,password:a}=e;return"admin"===s&&"admin123"===a?{id:"demo-admin-id",username:"admin",role:"admin"}:"exchange1"===s&&"exchange123"===a?{id:"demo-exchange-id",username:"exchange1",role:"exchange",exchangeName:"Demo Exchange Office"}:null},x=async e=>{try{var s,a;let r=(0,n.rJ)(t.db,"users"),l=(0,n.P)(r,(0,n._M)("username","==",e)),i=await (0,n.GG)(l);if(i.empty)return null;let c=i.docs[0],o=c.data();return{id:c.id,username:o.username,password:o.password,role:o.role,exchangeName:o.exchangeName,contactInfo:o.contactInfo,balance:o.balance||0,commissionRates:o.commissionRates||{incoming:0,outgoing:0},assignedBanks:o.assignedBanks||[],status:o.status||"active",createdAt:(null==(s=o.createdAt)?void 0:s.toDate())||new Date,updatedAt:(null==(a=o.updatedAt)?void 0:a.toDate())||new Date}}catch(e){return console.error("Error finding user:",e),null}},u=async()=>{try{if(!await d())return console.log("Firebase not accessible, skipping admin creation"),!0;if(await x("admin"))return!0;let e=await l("admin123"),s={username:"admin",password:e,role:"admin",balance:0,commissionRates:{incoming:0,outgoing:0},assignedBanks:[],status:"active",createdAt:n.Dc.now(),updatedAt:n.Dc.now()};return await (0,n.gS)((0,n.rJ)(t.db,"users"),s),console.log("Default admin user created"),!0}catch(e){return console.error("Error creating default admin:",e),!0}},h=async e=>{try{let{username:s,password:a}=e;if(!c(s)||!o(a))return null;if(!await d())return console.warn("Firebase not accessible, using fallback authentication"),await m(e);let r=await x(s);if(!r||"active"!==r.status||!await i(a,r.password))return null;return{id:r.id,username:r.username,role:r.role,exchangeName:r.exchangeName}}catch(s){return console.error("Authentication error:",s),console.warn("Falling back to demo authentication"),await m(e)}},g=async e=>{try{if(!await d())return console.warn("Firebase not accessible, cannot create exchange user"),!1;if(!c(e.username)||!o(e.password)||await x(e.username))return!1;let s=await l(e.password),a={username:e.username,password:s,role:"exchange",exchangeName:e.exchangeName,balance:e.balance||0,commissionRates:e.commissionRates||{incoming:0,outgoing:0},assignedBanks:[],status:"active",createdAt:n.Dc.now(),updatedAt:n.Dc.now()};return await (0,n.gS)((0,n.rJ)(t.db,"users"),a),!0}catch(e){return console.error("Error creating exchange user:",e),!1}}},9825:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[992,865,441,684,358],()=>s(8030)),_N_E=e.O()}]);